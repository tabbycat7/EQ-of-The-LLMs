# LMArena - AI 模型对战评测平台

一个类似 lmarena.ai 的 AI 模型体验与评测平台，支持匿名对战、模型对比和直接对话。

## 功能特性

### 1. 匿名对战模式 (Battle Mode)
- 系统随机选择两个匿名模型同时回答用户问题
- 用户投票选择更好的答案
- 投票后揭示模型身份
- 所有投票数据累计到公开排行榜

### 2. 并排对比模式 (Side-by-Side)
- 用户选择两个模型进行对比
- 实时查看两个模型的回答
- 数据用于研究，不计入排行榜

### 3. 直接对话模式 (Direct Chat)
- 选择单个模型进行对话
- 体验特定模型的能力

### 4. 排行榜系统
- 基于匿名对战的投票数据
- 使用 ELO 评分系统
- 实时更新模型排名

## 技术栈

- **后端框架**: FastAPI
- **数据库**: SQLite + SQLAlchemy
- **AI 接口**: OpenAI Python SDK
- **前端**: HTML + Vanilla JavaScript + CSS

## 安装与运行

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 配置环境变量

复制 `.env.example` 为 `.env` 并填入你的 API 密钥：

```bash
cp .env.example .env
```

编辑 `.env` 文件，填入你的 OpenAI API Key。

### 3. 运行服务器

```bash
python main.py
```

或使用 uvicorn：

```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### 4. 访问应用

打开浏览器访问: http://localhost:8000

## 项目结构

```
LLMEQ/
├── main.py                 # FastAPI 应用主入口
├── models/                 # 数据库模型
│   ├── __init__.py
│   └── database.py
├── services/              # 业务逻辑层
│   ├── __init__.py
│   ├── model_service.py   # 模型调用服务
│   └── rating_service.py  # ELO 评分服务
├── api/                   # API 路由
│   ├── __init__.py
│   ├── battle.py          # 对战相关 API
│   ├── chat.py            # 对话相关 API
│   └── leaderboard.py     # 排行榜 API
├── static/                # 静态文件
│   ├── css/
│   │   └── style.css
│   └── js/
│       └── app.js
├── templates/             # HTML 模板
│   └── index.html
├── config.py             # 配置文件
├── requirements.txt      # Python 依赖
└── README.md            # 项目文档
```

## API 文档

启动服务器后，访问 http://localhost:8000/docs 查看完整的 API 文档。

### 主要 API 端点

- `POST /api/battle/start` - 开始匿名对战
- `POST /api/battle/chat` - 发送消息到对战模型
- `POST /api/battle/vote` - 提交投票
- `GET /api/battle/reveal/{session_id}` - 揭示模型身份
- `POST /api/chat/direct` - 直接对话模式
- `POST /api/chat/sidebyside` - 并排对比模式
- `GET /api/leaderboard` - 获取排行榜

## 支持的模型

默认支持 OpenAI 模型：
- GPT-4 Turbo
- GPT-4
- GPT-3.5 Turbo

可通过修改配置添加其他模型提供商（Anthropic, Google, etc.）

## 许可证

MIT License

